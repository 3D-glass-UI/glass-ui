/* ================================== */
/* Inset */
@use "../0-base/color";
@use "../1-layout/layout-help" as help;
@use "../1-layout/z-index" as z;
@use "fill";
@use "glass";
@use "shadow" as sha;
/* ================================== */


/* Inset â†’ shadow only */
/* ================================== */
$inset-sha-xs:
  inset 0.25px 0.5px 1px oklch(color.$dark / 0.1),    // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // med top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // small top-left shadow

$inset-sha-sm:
  inset 0.5px 1px 2px oklch(color.$dark / 0.1),    // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // med top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // small top-left shadow


$inset-sha-md:
  inset 1px 2px 4px oklch(color.$dark / 0.1), // xl top-left shadow
  inset 0.5px 1px 2px oklch(color.$dark / 0.1),    // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // md top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // sm top-left shadow


$inset-sha-lg:
  inset 2px 4px 8px oklch(color.$dark / 0.1), // xl top-left shadow
  inset 1px 2px 4px oklch(color.$dark / 0.1), // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // md top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // sm top-left shadow


$inset-sha-xl:
  inset 3px 6px 16px oklch(color.$dark / 0.05), // xl top-left shadow
  inset 2px 4px 8px oklch(color.$dark / 0.1), // lg top-left shadow
  inset 1px 2px 4px oklch(color.$dark / 0.1), // md-lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.3), // md top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // sm top-left shadow


.inset-sha-xs {
  box-shadow: $inset-sha-xs;
}

.inset-sha-sm {
  box-shadow: $inset-sha-sm;
}

.inset-sha-md {
  box-shadow: $inset-sha-md;
}

.inset-sha-lg {
  box-shadow: $inset-sha-lg;
}

.inset-sha-xl {
  box-shadow: $inset-sha-xl;
}









/* Insets have both light and dark box-shadows to create a 3D effect */
$inset-xs:
  inset -1px -1px 1px -2px oklch(color.$light / 0.7),          // specular
  inset -0.3px -0.3px 0.4px -0.3px oklch(color.$light / 0.15), // highlight
  inset -0.3px -0.3px 0.6px -0.3px oklch(color.$light / 0.3),  // bevel blur
  inset -0.3px -0.3px 0.1px oklch(color.$light / 0.1),         // bevel

  inset 0.25px 0.5px 1px oklch(color.$dark / 0.1),    // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // med top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // small top-left shadow

$inset-sm:
  inset -1px -1px 1px -2px oklch(color.$light / 0.7),         // specular
  inset -0.3px -0.3px 0.6px -0.3px oklch(color.$light / 0.15), // highlight
  inset -0.6px -0.6px 0.6px -0.5px oklch(color.$light / 0.25), // bevel blur
  inset -0.6px -0.6px 0.1px oklch(color.$light / 0.1),        // bevel

  inset 0.5px 1px 2px oklch(color.$dark / 0.1),    // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // med top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // small top-left shadow


$inset-md:
  inset -1px -1px 1px -2px oklch(color.$light / 0.7),       // specular
  inset -0.3px -0.3px 0.6px -0.3px oklch(color.$light / 0.15), // highlight
  inset -1px -1px 1px -1px oklch(color.$light / 0.25),       // bevel blur
  inset -0.8px -0.8px 0.1px oklch(color.$light / 0.1),          // bevel

  inset 1px 2px 4px oklch(color.$dark / 0.1), // xl top-left shadow
  inset 0.5px 1px 2px oklch(color.$dark / 0.1),    // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // md top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // sm top-left shadow


$inset-lg:
  inset -2px -2px 2px -4px oklch(color.$light / 0.7),      // specular
  inset -1px -1px 1.6px -1.5px oklch(color.$light / 0.15),  // highlight
  inset -1px -1px 1px -1px oklch(color.$light / 0.25),      // bevel blur
  inset -1px -1px 0.1px oklch(color.$light / 0.1),         // bevel

  inset 2px 4px 8px oklch(color.$dark / 0.1), // xl top-left shadow
  inset 1px 2px 4px oklch(color.$dark / 0.1), // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // md top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // sm top-left shadow


$inset-xl:
  inset -2px -2px 2px -4px oklch(color.$light / 0.7),         // specular
  inset -1px -1px 1.6px -1.2px oklch(color.$light / 0.15),     // highlight
  inset -1.3px -1.3px 1.3px -1.3px oklch(color.$light / 0.2), // bevel blur
  inset -1.3px -1.3px 0.2px  oklch(color.$light / 0.08),       // bevel

  inset 3px 6px 16px oklch(color.$dark / 0.05), // xl top-left shadow
  inset 2px 4px 8px oklch(color.$dark / 0.1), // lg top-left shadow
  inset 1px 2px 4px oklch(color.$dark / 0.1), // md-lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.3), // md top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // sm top-left shadow


/* Insets */
/* ================================== */
.inset-xs {
  box-shadow: $inset-xs;
}

.inset-sm {
  box-shadow: $inset-sm;
}

.inset-md {
  box-shadow: $inset-md;
}

.inset-lg {
  box-shadow: $inset-lg;
}

.inset-xl {
  box-shadow: $inset-xl;
}


/* Flat insets  */
/* ================================== */
$flat-inset-sm:
  inset 0 -0.5px 0.3px -0.4px oklch(color.$light / 0.15), // specular
  inset 0 -1px 0.8px -1px oklch(color.$light / 0.2),     // bevel blur
  inset 0 -1px 0 oklch(color.$light / 0.06),      // bevel

  inset 0 0.5px 1px -1px oklch(color.$dark / 0.7), // small shadow
  inset 0 1px 2px -2px oklch(color.$dark / 0.5), // med shadow
  inset 0 2px 4px -4px oklch(color.$dark / 0.3);    // lg shadow

.flat-inset-sm {
  box-shadow: $flat-inset-sm;
}

$flat-inset-md:
  inset 0 -0.5px 0.3px -0.4px oklch(color.$light / 0.1), // specular
  inset 0 -1.6px 1.3px -1.6px oklch(color.$light / 0.2),     // bevel blur
  inset 0 -1.6px 0  oklch(color.$light / 0.06),      // bevel

  inset 0 0.5px 1px -1px oklch(color.$dark / 0.5), // small shadow
  inset 0 1px 2px -2px oklch(color.$dark / 0.5), // small shadow
  inset 0 2px 4px -4px oklch(color.$dark / 0.5), // med shadow
  inset 0 4px 8px -8px oklch(color.$dark / 0.3);    // lg shadow

.flat-inset-md {
  box-shadow: $flat-inset-md;
}

$flat-inset-lg:
  inset 0 -0.5px 0.3px -0.4px oklch(color.$light / 0.1), // specular
  inset 0 -2px 1.8px -2px oklch(color.$light / 0.2),     // bevel blur
  inset 0 -2px 0  oklch(color.$light / 0.06),      // bevel highlight

  inset 0 0.5px 1px -1px oklch(color.$dark / 0.5), // small shadow
  inset 0 2px 4px -4px oklch(color.$dark / 0.5), // small shadow
  inset 0 4px 8px -8px oklch(color.$dark / 0.5), // med shadow
  inset 0 8px 16px -16px oklch(color.$dark / 0.3);    // lg shadow

.flat-inset-lg {
  box-shadow: $flat-inset-lg;
}


// Highlight for small insets
$inset-highlight-sm:
  inset -0.3px -0.3px 0 oklch(color.$light / 0.05),      // bottom-right bevel
  inset -0.2px -0.2px 0.2px oklch(color.$light / 0.05),      // bottom-right bevel blur
  inset -0.3px -0.3px 0.3px -0.3px oklch(color.$light / 0.15),      // bottom-right highlight
  inset -0.5px -0.5px 0 -0.25px oklch(color.$light / 0.05);  // bottom-right specular

// Shadow for small insets
$inset-shadow-sm:
  inset 0.5px 1px 2px oklch(color.$dark / 0.1),    // lg top-left shadow
  inset 0.25px 0.75px 1.5px -0.5px oklch(color.$dark / 0.25), // med top-left shadow
  inset 0.25px 0.25px 0.5px -0.5px oklch(color.$dark / 0.3); // small top-left shadow


// .inset-bevel-3 {
//   position: relative;
//   overflow: hidden;
//   isolation: isolate;
//   z-index: 9;

//   @include fill.glass-filter;

//   &::before {
//     @include help.pseudo;
//     z-index: -2;

//     @include fill.noise-md;
//     box-shadow: sha.$inset-sha-md;
//     filter: brightness(0.1);
//   }

//   &::after {
//     @include help.pseudo;
//     z-index: -1;
//     border-radius: inherit;
//     box-shadow: $inset-highlight-sm;
//   }
// }


/* Inset bevel */
/* ================================== */
.inset-bevel-sm {
  position: relative;
  @include fill.glass-filter;
  @include fill.noise-sm;
  box-shadow: $inset-md;
  background-color: var(--tint-dark);

  &::after {
    @include help.pseudo;
    z-index: -1;

    border-bottom: 0.6px solid transparent;
    background: linear-gradient(
        to right,
        oklch(color.$light / 0) 0%,
        oklch(color.$light / 0.1) 50%,
        oklch(color.$light / 0.5) 85%,
        oklch(color.$light / 0.3) 90%,
        oklch(color.$light / 0.01) 100%
      ) border-box;

    -webkit-mask:
      border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    mask:
      border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
  }
}

.inset-glass-clear {
  // pointer-events: none;
  position: relative;

  // box-shadow: $inset-highlight-sm;
  // @include fill.noise-md;
  @include fill.glass-filter;

  &::before {
    @include help.pseudo;
    z-index: -2;

    background-color: var(--tint-dark);
    // box-shadow: sha.$inset-sha-md;
    filter: brightness(0.1);
  }

  &::after {
    @include help.pseudo;
    z-index: -1;

    border-bottom: 0.8px solid transparent;
    background: linear-gradient(
        to right,
        oklch(color.$light / 0) 0%,
        oklch(color.$light / 0.1) 50%,
        oklch(color.$light / 0.6) 85%,
        oklch(color.$light / 0.2) 100%
      ) border-box;

    -webkit-mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
  }
}

.inset-bevel-m {
  position: relative;

  // box-shadow: $inset-highlight-sm;
  @include fill.glass-filter;
  // backdrop-filter: blur(20px);


  &::before {
    @include help.pseudo;
    z-index: -2;

    filter: brightness(0.1);
    // box-shadow: $inset-shadow-sm;
    background-color: var(--tint-dark);
  }

  &::after {
    @include help.pseudo;
    z-index: -1;

    border-bottom: 0.8px solid transparent;
    background: linear-gradient(
        to right,
        oklch(color.$light / 0) 0%,
        oklch(color.$light / 0.1) 50%,
        oklch(color.$light / 0.6) 85%,
        oklch(color.$light / 0.2) 90%,
        oklch(color.$light / 0) 100%
      )
      border-box;

    -webkit-mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
  }
}


/* Inset used in tab menu  */
/* ================================== */
.inset-glass-md {
  position: relative;
  // background-color: color.$tint-dark;
  @include fill.fill(xdark);
  box-shadow: $inset-lg;

  // box-sizing: content-box;

  &::before {
    @include help.pseudo;
    z-index: -2;
    // @include fill.glass-filter;
    @include fill.noise-sm;
  }

  &::after {
    @include help.pseudo;
    z-index: -1;

    border-bottom: 0.6px solid transparent;
    background: linear-gradient(
        to right,
        oklch(color.$light / 0) 0%,
        oklch(color.$light / 0.1) 50%,
        oklch(color.$light / 0.5) 85%,
        oklch(color.$light / 0.3) 90%,
        oklch(color.$light / 0.01) 100%
      ) border-box;

    -webkit-mask:
      border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    mask:
      border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
  }
}

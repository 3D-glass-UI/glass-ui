/* ================================== */
/* Inset */
@use "../0-base/color" as *;
@use "../1-layout/help" as *;
@use "../1-layout/z-index" as z;
@use "../2-visual" as *;
@use "../2-visual/fill";
@use "glass";
@use "../2-visual/shadow" as sha;

// for med insets /////
$inset-high-md: 
  inset -0.5px -0.5px 0.5px  rgba($light-color, 0.2),  // bottom-right highlight
  inset -1px -1px 0 rgba($light-color, 0.06),           // bottom-right bevel
  inset 2px 2px 0.2px -2.6px rgba($light-color, 0.1),  // top-left specular highlight
  inset -2px -2px 0.5px -2.8px rgba($light-color, 0.2); // bottom-right specular


$inset-sha-md: 
  inset 0 3px 6px rgba($shadow-color, 0.1), // L around
  inset 2px 1.25px 3px rgba($shadow-color, 0.1), // med top left
  inset 1px 1px 1px rgba($shadow-color, 0.1); // small around

// same as above but all in one 
$inset-md: 
  inset -0.5px -0.5px 0.5px  rgba($light-color, 0.2),  // bottom-right highlight
  inset -1px -1px 0 rgba($light-color, 0.06),           // bottom-right bevel
  inset 2px 2px 0.2px -2.6px rgba($light-color, 0.1),  // top-left specular highlight
  inset -2px -2px 0.5px -2.8px rgba($light-color, 0.2), // bottom-right specular
  inset 0 3px 6px rgba($shadow-color, 0.1), // L around
  inset 2px 1.25px 3px rgba($shadow-color, 0.1), // med top left
  inset 1px 1px 1px rgba($shadow-color, 0.1); // small around


.inset-glass-md {
  // pointer-events: none;
  position: relative;
  overflow: hidden;

  box-shadow: $inset-md;
  // background-color: $glass-dark;

  &::after {
    @include pseudo;
    z-index: -1;

    border-bottom: 0.5px solid transparent;
    background: linear-gradient(
        to right,
        rgba($snow90, 0) 0%,
        rgba($snow90, 0.1) 50%,
        rgba($sky99, 0.45) 85%,
        rgba($snow95, 0.01) 100%
      ) border-box;

    -webkit-mask: 
      border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    mask: 
      border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
  }

  &::before {
    @include pseudo;
    z-index: -2;

    box-shadow: $inset-md;
    @include fill.glass-filter-dark;
    @include fill.noise; 
  }
}


    // box-shadow: $inset-high-md;
    // box-shadow: $inset-sha-md;
    // filter: brightness(0.1);
    // filter keeps $glass-dark & $inset-sha-md from looking washed out over dark backdrops. Can remove if using #000 for $shadow color 
/* ================================== */


$inset-sha-xs: 
  // -1.4px -2.6px 1.4px -3px rgba($light-color, 0.2), //top left specular
  // 1.9px 2.6px 1.4px -3px rgba($light-color, 0.7), //bottom right specular
  // 0.4px 1.4px 0.8px -1px rgba($light-color, 0.3), //bottom highlight
  inset 1px 1px 3px -1px rgba($shadow-color, 0.2),
  // med top left
  inset 3px 3px 8px -2px rgba($shadow-color, 0.2),
  // wide top left
  inset -0.25px -0.25px 8px -3px rgba($shadow-color, 0.1),
  // med around
  inset 0 0 1px -0.5px rgba($shadow-color, 0.4); // thin around

$inset-sha-s: 
  -1.4px -2.6px 1.4px -3px rgba($light-color, 0.2),
  //top left specular
  1.9px 2.6px 1.4px -3px rgba($light-color, 0.7),
  //bottom right specular
  0.4px 1.4px 0.8px -1px rgba($light-color, 0.3),
  //bottom highlight
  inset 1px 1px 3px -1px rgba($shadow-color, 0.2),
  // med top left
  inset 3px 3px 8px -2px rgba($shadow-color, 0.2),
  // wide top left
  inset -0.25px -0.25px 8px -3px rgba($shadow-color, 0.1),
  // med around
  inset 0 0 1px -0.5px rgba($shadow-color, 0.4); // thin around

$inset-sha-m: -1.4px -2.6px 1.4px -3px rgba($light-color, 0.3),
  //top left specular
  1.9px 2.6px 1.4px -3px rgba($light-color, 0.8),
  //bottom right specular
  0.4px 1.4px 1px -1px rgba($light-color, 0.4),
  //bottom highlight
  inset 1px 1px 3px -1px rgba($shadow-color, 0.3),
  // med top left
  inset 3px 3px 8px -2px rgba($shadow-color, 0.2),
  // wide top left
  inset -0.25px -0.25px 8px -3px rgba($shadow-color, 0.2),
  // med around
  inset 0 0 1px -0.5px rgba($shadow-color, 0.5); // thin around

$inset-xs: 
  inset 0px -0.8px 0.01px rgba($light-color, 0.12),
  //bottom bevel
  inset -1px -2px 0 -1.74px rgba($light-color, 0.1),
  //bottom specular
  inset -2.2px 0.5px 0.1px -1px rgba($shadow-color, 0.12),
  //right corner in-bevel shadow
  inset 2px 2px 4px rgba($shadow-color, 0.12),
  // small top left
  inset 0 0 6px rgba($shadow-color, 0.2),
  // med around
  inset 0.25px 0.25px 1px rgba($shadow-color, 0.2); // thin top left

$inset-s: 
  inset -1px -3px 0.05px -2.5px rgba($light-color, 0.5),
  //bottom right specular
  inset -2.2px 0.5px 0.1px -1px rgba($shadow-color, 0.1),
  //right corner in-bevel shadow
  inset -1px -2.6px 0.05px -1.8px rgba($light-color, 0.15),
  //bottom right in-bevel s
  inset 0 0 8px rgba($shadow-color, 0.15),
  // med top left
  inset 2px 2px 4px rgba($shadow-color, 0.1),
  // wide around
  inset 0.25px 0.25px 1px rgba($shadow-color, 0.2); // thin top left

$inset-l: 
  inset -1px -3px 0.5px -2.8px rgba($light-color, 0.2),
  //bottom right specular
  inset -2.75px 0.5px 0.1px -1px rgba($shadow-color, 0.1),
  //right corner in-bevel shadow
  inset -1.2px -2.5px 0.1px -1.2px rgba($light-color, 0.2),
  //bottom right in-bevel l ***
  inset 0 0 8px rgba($shadow-color, 0.15),
  // med top left
  inset 2px 2px 4px rgba($shadow-color, 0.1),
  // wide around
  inset 0.25px 0.25px 1px rgba($shadow-color, 0.2); // thin top left

////
///
///

// //Base inset
// $inset-highlight-base:
//   inset -1px -2.5px 0.4px -1.5px rgba($light-color, 0.5), //bottom specular
//   inset -0.5px -1.5px 0.1px  rgba($light-color, 0.15); //bottom bevel

// $inset-shadow-base:
//   // inset -3px -2px 0.4px -2.5px rgba($light-color, 0.5), //bottom specular
//   inset 2px 2px 4px -1px rgba($shadow-color, 0.25), // med top left
//   inset 0 0 8px -1px rgba($shadow-color, 0.15), // L around
//   inset 0 0 2px  rgba($shadow-color, 0.1), // small around
//   inset -2px 0.5px 0.5px -1px rgba($shadow-color, 0.15); //right corner in-bevel shadow

//Strong
$inset-highlight-strong: inset -2px 0.5px 0.4px -1px rgba($shadow-color, 0.1),
//right corner in-bevel shadow
inset -0.5px -1.5px 0.1px rgba($light-color, 0.15),
//bottom bevel
inset -1px -2.5px 0.4px -1.5px rgba($light-color, 0.3); //bottom specular

$inset-shadow-strong: inset 1px 1px 6px rgba($shadow-color, 0.3),
// small top left
inset 0 0 8px -2px rgba($shadow-color, 0.25),
// med around
inset 0.2px 0.2px 0.5px -1.5px rgba($shadow-color, 0.7); // thin top left



/* Bevel box-shadow */
/* ================================== */

// for small insets 
$inset-highlight-s: 
// inset  0     -0.5px 0 rgba($light-color, 0.15), // bottom highlight
inset -0.5px -0.8px 0 rgba($light-color, 0.25); // bottom-right bevel


$inset-shadow-s: 
inset 0 2px 4px rgba($shadow-color, 0.1), // L around
inset 1.5px 1.2px 2px rgba($shadow-color, 0.15), // med top left
inset 0.5px 0.5px 0.5px rgba($shadow-color, 0.1); // small around



////







$inset-new: 
  inset 1px 2px 16px rgba($shadow-color, 0.05), // L top-left shadow
  inset 2px 1.25px 3px rgba($shadow-color, 0.15), // M top-left shadow
  inset 0.5px 0.5px 1px rgba($shadow-color, 0.15), // S top-left shadow

  inset -2px -2px 0.4px -2.4px rgba($light-color, 0.15), // bottom-right specular
  inset -0.8px -0.8px 0.2px rgba($light-color, 0.15), // bottom-right wrap bevel
  inset 0 0 0.5px rgba($light-color, 0.15); // smol light all around 

 




@mixin inset-xs {
  box-shadow: $inset-m;
  -webkit-backdrop-filter: blur(40px) brightness(0.95);
  backdrop-filter: blur(40px) brightness(0.95);
}

@mixin inset-s {
  box-shadow: $inset-m;
  -webkit-backdrop-filter: blur(40px) brightness(0.85);
  backdrop-filter: blur(40px) brightness(0.85);
}

@mixin inset-m {
  box-shadow: $inset-m;
  -webkit-backdrop-filter: blur(40px) brightness(0.75);
  backdrop-filter: blur(40px) brightness(0.75);
}

$flat-inset-sm: 
  inset 0 -0.3px 0 rgba($light-color, 0.12), // bottom highlight
  inset 0 -0.7px 0.1px rgba($light-color, 0.12), // bottom bevel
  inset 0 3px 2px -2px rgba($shadow-color, 0.1), // med top 
  inset 0 1px 0.5px -1px rgba($shadow-color, 0.12); // small top

.flat-inset-sm {
  box-shadow: $flat-inset-sm;
}

$flat-inset-md: 
  inset 0 -0.8px 0.1px rgba($light-color, 0.1), // bottom bevel
  inset 0 2px 4px rgba($shadow-color, 0.1), // med top 
  inset 0 0.8px 0.5px rgba($shadow-color, 0.1); // small top



// inset 2px 2px 0.4px -2.4px rgba($light-color, 0.4), //top-left specular sliver
// inset 0.6px 0.6px 0.1px rgba($light-color, 0.12), //top-left highlight wrap s
// inset 2px 2px 0.2px -2px rgba($light-color, 0.1), //top-left corner bevel s

// inset -2px -2px 0.2px -2.4px rgba($light-color, 0.04), //bottom-right specular
// inset -1.4px -2px 1.8px -3px rgba($light-color, 0.5); //bottom thin

.inset-bevel-s {
  position: relative;
  font-size: 1rem;
  color: white;
  box-shadow: $inset-highlight-s;
  -webkit-backdrop-filter: blur(10px) brightness(0.95);
  backdrop-filter: blur(10px) brightness(0.95);
  border-radius: 32px;
  width: 100%;
  height: 100%;



  & svg {
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 20;
    top: 0;
    left: 0;
  }

  &::before {
    content: "";
    position: absolute;
    overflow: hidden;
    pointer-events: none;
    inset: 0;
    border-radius: inherit;
    z-index: 2;
    @include fill.noise;
    box-shadow: $inset-shadow-s;
    filter: brightness(0.3);
    width: 100%;
    height: 100%;
  }
    // &::after {
  //   content: "";
  //   position: absolute;
  //   overflow: hidden;
  //   pointer-events: none;
  //   inset: 0;
  //   border-radius: inherit;
  //   border-color: transparent;
  //   border-bottom-style: solid;
  //   border-width: 0 0 0.5px 0;
  //   background: linear-gradient(
  //       to right,
  //       rgba($snow90, 0.01) 0%,
  //       rgba($snow95, 0.2) 60%,
  //       rgba($sky99, 0.6) 80%,
  //       rgba($sky99, 0.4) 90%,
  //       rgba($snow95, 0.2) 100%
  //     )
  //     border-box;

  //   -webkit-mask: linear-gradient(#fff 0 0) padding-box,
  //     linear-gradient(#fff 0 0);
  //   -webkit-mask-composite: destination-out;
  //   mask-composite: exclude;
  // }
}



.inset-bevel-3 {
  position: relative;
  overflow: hidden;

  // isolation: isolate;
  // z-index: 9;

  font-size: 1rem;
  color: white;

  border-radius: 20px;

  -webkit-backdrop-filter: blur(30px) brightness(0.9);
  backdrop-filter: blur(30px) brightness(0.9);

  &::before {
    content: "";
    position: absolute;
    overflow: hidden;
    pointer-events: none;
    inset: 0;
    z-index: -1;
    border-radius: inherit;

    @include fill.noise;
    box-shadow: $inset-sha-md;
    filter: brightness(0.1);
  }

  &::after {
    content: "";
    position: absolute;
    overflow: hidden;
    pointer-events: none;
    inset: 0;
    z-index: 30;
    border-radius: inherit;
    box-shadow: $inset-high-md;
  }
}

//note: .inset-glass- does NOT work for text input elements because they can not have pseudo elements
.inset-glass-reg {
  pointer-events: none;
  position: relative;

  box-shadow: $inset-high-md;
  // @include fill.noise;
  @include fill.glass-filter-dark;

  &::after {
    @include pseudo;
    z-index: -1;

    border-bottom: 0.8px solid transparent;
    background: linear-gradient(
        to right,
        rgba($snow90, 0) 0%,
        rgba($snow90, 0.1) 50%,
        rgba($sky99, 0.6) 85%,
        rgba($snow95, 0.2) 100%
      ) border-box;

    -webkit-mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
  }

  &::before {
    @include pseudo;
    z-index: -2;

    box-shadow: $inset-sha-md;
    background-color: $glass-dark;
    filter: brightness(0.01);
  }
}





.inset-bevel-m {
  position: relative;
  z-index: -3;

  // box-shadow: $inset-high-md;

  backdrop-filter: blur(20px);

  // -webkit-backdrop-filter: blur(20px) brightness(0.85);
  // backdrop-filter: blur(20px) brightness(0.85);
  // background-color: rgba($ink6, 0.1);

  &::before {
    @include pseudo;
    z-index: -3;

    // filter: brightness(0.1);

    box-shadow: inset 0 3px 6px rgba($shadow-color, 0.5),
      // L around
      inset 2px 1.25px 3px rgba($shadow-color, 0.5),
      // med top left
      inset 1px 1px 1px rgba($shadow-color, 0.5); // small around;

    // background-color: rgba($ink6, 0.1);
  }

  &::after {
    @include pseudo;
    z-index: 2;

    border-bottom: 0.8px solid transparent;
    background: linear-gradient(
        to right,
        rgba($snow90, 0) 0%,
        rgba($snow90, 0.1) 50%,
        rgba($sky99, 0.6) 85%,
        rgba($snow95, 0.2) 100%
      )
      border-box;

    -webkit-mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    mask: border-box linear-gradient(#fff, #fff),
      padding-box linear-gradient(#000, #000);

    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
  }
}